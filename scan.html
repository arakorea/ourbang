<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ourbang — Scan</title>
  <meta name="description" content="ourbang Scan — LiDAR 또는 카메라로 공간을 스캔하는 방법을 안내합니다." />

  <meta property="og:title" content="ourbang — Scan" />
  <meta property="og:description" content="Scan a space with LiDAR or Camera" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="assets/images/og/og-cover.jpg" />
  <meta name="twitter:card" content="summary_large_image" />

  <link rel="icon" href="assets/images/brand/favicon.png" />

  
  <link rel="stylesheet" href="assets/css/site.css?v=22" />
<style>
/* Scan page-specific layout (keeps nav styling in assets/css/site.css) */
.hero{padding:44px 0 18px}
h1{font-size:44px; margin:12px 0}
.lead{color:var(--muted); max-width:720px; line-height:1.7}

.grid{display:grid; grid-template-columns:1fr 1fr; gap:18px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}

.panel{
  position:relative;
  min-height:360px;
  border-radius:var(--radius2);
  overflow:hidden;
  border:1px solid rgba(255,255,255,.10);
  background:var(--panel);
  box-shadow:var(--shadow);
}
.panelBg{
  position:absolute; inset:0;
  background-image:
    linear-gradient(180deg, rgba(7,9,15,.25), rgba(7,9,15,.75)),
    url("assets/images/preview/scan-shot.jpg");
  background-size:cover;
  background-position:center;
}
.panelInner{position:relative; padding:18px; display:flex; flex-direction:column; gap:12px}
.step{border:1px solid rgba(255,255,255,.12); border-radius:16px; padding:14px; background:rgba(0,0,0,.22)}
.step h3{margin:0 0 6px; font-size:16px}
.step p{margin:0; color:var(--muted); font-size:13px; line-height:1.6}

/* Video stage */
.videoStage{
  position: relative;
  width: 100%;
  max-width: 1100px;
  margin: 40px auto 10px;
  aspect-ratio: 16 / 9;
  border-radius: var(--radius2);
  overflow: hidden;
  background: #000;
  border: 1px solid rgba(255,255,255,.12);
}
.videoStage video{
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: #000;
}

/* Hotspots: keep transparent hitboxes (no white boxes) */
.videoStage .hotspot{
  position:absolute;
  z-index:3;
  -webkit-appearance:none;
  appearance:none;
  background: rgba(0,0,0,0) !important;
  border: 1px solid rgba(120,180,255,.55) !important;
  border-radius: 14px !important;
  padding: 0 !important;
  margin: 0 !important;
  box-shadow: none !important;
  outline: none !important;
  -webkit-tap-highlight-color: transparent;
  cursor:pointer;
}
.videoStage .hotspot:active{background: rgba(120,180,255,.08) !important;}
.videoStage .hotspot:focus-visible{
  outline: 2px solid rgba(255,255,255,.55) !important;
  outline-offset: 3px !important;
}

/* Tap-to-start overlay (autoplay blocked) */
.tapStart{
  position:absolute;
  z-index:7;
  left:50%;
  top:50%;
  transform:translate(-50%,-50%);
  display:none;
  align-items:center;
  justify-content:center;
  min-width: 180px;
  height: 56px;
  padding: 0 18px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,.16);
  background: rgba(0,0,0,.42);
  color: rgba(255,255,255,.92);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
  box-shadow: 0 18px 60px rgba(0,0,0,.55);
  font-size: 15px;
  letter-spacing:.2px;
  cursor:pointer;
  -webkit-tap-highlight-color: transparent;
  user-select:none;
}
.tapStart:hover{background: rgba(0,0,0,.52)}
.tapStart:active{transform:translate(-50%,-50%) translateY(1px)}

/* Modal */
.modalBack{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.55);
  backdrop-filter:blur(6px);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:50;
}
.modalBack.open{display:flex}
.modal{
  width:min(920px,92vw);
  border-radius:28px;
  background:linear-gradient(180deg, rgba(20,24,32,.95), rgba(10,12,18,.98));
  border:1px solid rgba(255,255,255,.12);
  box-shadow:0 30px 120px rgba(0,0,0,.6);
}
.modalTop{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:18px 20px;
  border-bottom:1px solid rgba(255,255,255,.08);
}
.modalTop h3{margin:0;font-size:18px}
.modalClose{
  background:none;
  border:none;
  color:var(--muted);
  font-size:14px;
  cursor:pointer;
}
.modalBody{padding:20px}
.modalGrid{display:grid; grid-template-columns:1.1fr .9fr; gap:20px}
@media(max-width:900px){ .modalGrid{grid-template-columns:1fr} }
.modalImg{width:100%; border-radius:18px}
</style>
</head>
<body>
<header class="topbar">
  <div class="wrap">
    <div class="nav">
      <a class="brand" href="index.html">
        <div class="name">
          <strong>ourbang</strong>
        </div>
      </a>

      <nav class="menu" aria-label="Primary">
        <a href="explore.html">Explore</a>
        <a href="scan.html">Scan</a>
        <a href="mirror.html">Mirror</a>
        <a href="vision.html">Vision</a>
          <a href="contact.html">Contact</a>
        </nav>
    </div>
  </div>
</header>

<main>
  <section class="hero">
    <div class="wrap">
      <h1>공간을 스캔하는 방법</h1>
      <p class="lead">
        ourbang은 LiDAR 또는 카메라 기반으로 공간을 수집합니다.
        촬영 난이도를 낮추고, 결과물의 일관성을 유지하는 것이 목표입니다.
      </p>

      <div class="grid">
        <div class="panel">
          <div class="panelBg"></div>
        </div>

        <div class="panel">
          <div class="panelInner">
            <div class="step">
              <h3>1. 공간 준비</h3>
              <p>조명을 켜고, 이동 가능한 물체를 최소화합니다.</p>
            </div>
            <div class="step">
              <h3>2. 촬영 / 스캔</h3>
              <p>LiDAR 또는 카메라로 천천히 공간을 이동하며 촬영합니다.</p>
            </div>
            <div class="step">
              <h3>3. 업로드</h3>
              <p>촬영 데이터를 업로드하면 ourbang이 디지털 공간으로 변환합니다.</p>
            </div>
            <div class="step">
              <h3>4. 검수 & 공개</h3>
              <p>결과를 확인하고 탐색 가능한 링크로 공유합니다.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


<!-- Video showroom demo (no external link) -->
<section class="section" id="showroom" aria-label="Showroom demo">
  <div class="videoStage" id="videoStage">
    <video id="showroomVideo" preload="metadata" controls autoplay muted playsinline webkit-playsinline loop>
      <source src="assets/videos/ourbanggallery.mp4" type="video/mp4" />
    </video>
<button class="tapStart" id="tapStart" type="button" aria-label="Tap to start">
      Tap to Start
    </button>
<!-- hotspots injected by JS -->
  </div>
</section>

<!-- Artwork modal -->
<div class="modalBack" id="artModalBack" aria-hidden="true">
  <div class="modal" role="dialog" aria-modal="true" aria-labelledby="artModalTitle">
    <div class="modalTop">
      <div>
        <h3 id="artModalTitle">Artwork</h3>
        <div class="sub" id="artModalMeta"></div>
      </div>
      <button class="modalClose" id="artModalClose" type="button">Close</button>
    </div>

    <div class="modalBody">
      <div class="modalGrid">
        <div>
          <img class="modalImg" id="artModalImg" alt="Artwork image" src="" />
        </div>
        <div>
          <p class="sub" id="artModalDesc" style="margin-top:0"></p>

          <div style="display:flex; gap:10px; flex-wrap:wrap; margin-top:12px">
            <a class="btn primary" id="artModalBuy" href="purchase.html?id=1" target="_blank" rel="noopener">View &amp; Purchase</a>
            <a class="btn" href="#showroom">Back to video</a>
          </div>

          <p class="note" style="margin-top:12px">
            ourbang은 결제를 직접 처리하지 않습니다. 본 버튼은 “결제 흐름”을 보여주는 데모입니다.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(function(){
  // Slow auto-rotate feel (video playback)
  const video = document.getElementById("showroomVideo");
  
  

  // User intent lock: if user paused, do NOT auto-play again
  let userPaused = false;
  const PLAYBACK_RATE = 0.003;

// Slow auto-rotate feel (half speed)
  video.playbackRate = 0.0416667;

  // Autoplay safety (server/mobile): try autoplay, fall back to first user gesture.
  function tryPlay(){
    if(userPaused) return; // respect manual pause
    // satisfy autoplay policies
    video.muted = true;
    video.setAttribute("muted","");
    video.playsInline = true;
    video.setAttribute("playsinline","");
    video.setAttribute("webkit-playsinline","");
    // keep slow rotate speed
    video.playbackRate = PLAYBACK_RATE;

    const tap = document.getElementById("tapStart");
    const p = video.play();
    if(p && typeof p.catch === "function"){
      p.catch(()=> {
        // autoplay blocked → show tap-to-start
        if(tap){ tap.style.display = "inline-flex"; }
      });
    }
  }
      

  const tapStart = document.getElementById("tapStart");
  if(tapStart){
    tapStart.addEventListener("click", async (e)=>{
      e.preventDefault();
      e.stopPropagation();
      userPaused = false;
      tapStart.style.display = "none";
      video.muted = true;
      video.setAttribute("muted","");
      video.playbackRate = PLAYBACK_RATE;
      try{
        if(video.readyState < 2){ video.load(); }
        await video.play();
      }catch(err){
        console.warn("Play blocked:", err);
        tapStart.style.display = "inline-flex";
      }
      if(typeof setPP === "function") setPP();
    });
  }
  window.addEventListener("load", tryPlay);
  video.addEventListener("canplay", tryPlay, {once:true});

  // Ensure hotspots appear immediately on load (even before user interacts)
  function primeHotspots(){
    layout();
    // tiny seek to trigger first timeupdate/layout in some browsers
    try{
      if(video.readyState >= 1 && (video.currentTime || 0) < 0.02){
        video.currentTime = 0.02;
      }
    }catch(e){}
    layout();
  }
  window.addEventListener("load", primeHotspots);
  requestAnimationFrame(layout);
  setTimeout(layout, 150);
  setTimeout(layout, 500);

  // Ensure hotspots keep rendering even if timeupdate is sparse or video is paused
  setInterval(layout, 200);

  video.addEventListener("loadedmetadata", primeHotspots);
  video.addEventListener("canplay", primeHotspots);


});
    }
  });
          window.removeEventListener("click", unlock);
          window.removeEventListener("touchstart", unlock);
        };
        window.addEventListener("click", unlock, {once:true});
        window.addEventListener("touchstart", unlock, {once:true});
      });
    }
  }
// Autoplay safety: on some browsers autoplay is blocked unless muted + user gesture.
  function tryPlay(){
    const p = video.play();
    if(p && typeof p.catch === "function"){
      p.catch(()=> {
        // Wait for first user interaction, then try again.
        const unlock = ()=>{
          video.play().catch(()=>{});
          window.removeEventListener("click", unlock);
          window.removeEventListener("touchstart", unlock);
        };
        window.addEventListener("click", unlock, {once:true});
        window.addEventListener("touchstart", unlock, {once:true});
      });
    }
  }

  // 0.25 = quarter speed (recommended). Adjust if needed.
  video.playbackRate = 0.25;
  video.addEventListener("loadedmetadata", tryPlay);
  // Also attempt immediately (desktop often succeeds right away)
  tryPlay();

  const ARTIST = "Angel's Angle";
  const PRICE  = "$400,000";

  const works = {
    1: { title: "Artwork 1", img: "assets/images/artworks/1.jpg" },
    2: { title: "Artwork 2", img: "assets/images/artworks/2.jpg" },
    3: { title: "Artwork 3", img: "assets/images/artworks/3.jpg" },
    4: { title: "Artwork 4", img: "assets/images/artworks/4.jpg" },
    5: { title: "Artwork 5", img: "assets/images/artworks/5.jpg" },
    6: { title: "Artwork 6", img: "assets/images/artworks/6.jpg" },
    7: { title: "Artwork 7", img: "assets/images/artworks/7.jpg" },
  };

  // Video-hotspot demo config:
  // x/y/w/h are normalized 0..1 relative to the video stage box.
  // start/end are seconds. You can fine-tune later by watching the clip.
  const hotspots = [
    {id:1, label:"#1", start:0.0, end:1.2, x:0.05, y:0.08, w:0.22, h:0.22},
    {id:2, label:"#2", start:1.0, end:3.2, x:0.14, y:0.18, w:0.18, h:0.28},
    {id:3, label:"#3", start:1.0, end:3.2, x:0.36, y:0.18, w:0.24, h:0.28},
    {id:4, label:"#4", start:1.0, end:3.2, x:0.64, y:0.18, w:0.18, h:0.28},
    {id:5, label:"#5", start:0.0, end:6.0, x:0.78, y:0.12, w:0.20, h:0.34},
    {id:6, label:"#6", start:2.2, end:4.8, x:0.02, y:0.30, w:0.14, h:0.22},
    {id:7, label:"#7", start:3.6, end:5.8, x:0.88, y:0.22, w:0.10, h:0.24},
  ];

  const HOT_CYCLE = Math.max.apply(null, hotspots.map(h=>h.end)) || 6;


  const stage = document.getElementById("videoStage");


  // --- Nav control: Play/Pause via top navigation button ---
  const navCtl = document.getElementById("navPlayPause");
  function setNavCtl(){
    if(!navCtl) return;
    navCtl.textContent = video.paused ? "▶︎" : "⏸︎";
  }
  async function navToggle(){
    // satisfy policy-friendly settings
    video.muted = true;
    video.setAttribute("muted","");
    video.playsInline = true;
    video.setAttribute("playsinline","");
    video.setAttribute("webkit-playsinline","");
    video.playbackRate = PLAYBACK_RATE;

    try{
      if(video.paused){
        userPaused = false;
        const tap = document.getElementById("tapStart");
        if(tap) tap.style.display = "none";
        if(video.readyState < 2){ video.load(); }
        await video.play();
      }else{
        userPaused = true;
        video.pause();
      }
    }catch(err){
      console.warn("Nav play blocked:", err);
      const tap = document.getElementById("tapStart");
      if(tap) tap.style.display = "inline-flex";
    }
    setNavCtl();
    layout();
  }
  if(navCtl){
    navCtl.addEventListener("click", (e)=>{ e.preventDefault(); e.stopPropagation(); navToggle(); });
  }
  video.addEventListener("play", setNavCtl);
  video.addEventListener("pause", setNavCtl);
  video.addEventListener("loadedmetadata", setNavCtl);

});

// Modal elements
  const back = document.getElementById("artModalBack");
  const closeBtn = document.getElementById("artModalClose");
  const titleEl = document.getElementById("artModalTitle");
  const metaEl  = document.getElementById("artModalMeta");
  const descEl  = document.getElementById("artModalDesc");
  const imgEl   = document.getElementById("artModalImg");
  const buyEl   = document.getElementById("artModalBuy");

  function openModal(id){
    const w = works[id];
    if(!w) return;
    titleEl.textContent = w.title;
    metaEl.textContent  = ARTIST + " · " + PRICE;
    descEl.textContent  = "Artist: " + ARTIST + " · Price: " + PRICE;
    imgEl.src = w.img;
    buyEl.href = "purchase.html?id=" + encodeURIComponent(id);
    back.classList.add("open");
    back.setAttribute("aria-hidden","false");
  }
  function closeModal(){
    back.classList.remove("open");
    back.setAttribute("aria-hidden","true");
  }
  closeBtn.addEventListener("click", closeModal);
  back.addEventListener("click", (e)=>{ if(e.target === back) closeModal(); });
  document.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeModal(); });

  // Create hotspot elements
  const hs = hotspots.map(cfg=>{
    const el = document.createElement("button");
    el.type = "button";
    el.className = "hotspot";
    el.dataset.label = cfg.label;
    el.setAttribute("aria-label", "Open " + cfg.label);
    el.addEventListener("click", ()=> openModal(cfg.id));
    stage.appendChild(el);
    return {cfg, el};
  });

  function layout(){
    const rect = stage.getBoundingClientRect();
    const W = rect.width, H = rect.height;
    const t = ((video.currentTime || 0) % HOT_CYCLE);
    hs.forEach(({cfg, el})=>{
      const on = (t >= cfg.start && t <= cfg.end);
      el.hidden = !on;
      if(!on) return;
      el.style.left   = (cfg.x * W) + "px";
      el.style.top    = (cfg.y * H) + "px";
      el.style.width  = (cfg.w * W) + "px";
      el.style.height = (cfg.h * H) + "px";
    });
  }


  // Smooth hotspot updates while playing (timeupdate can be sparse on mobile / low playbackRate)
  let rafId = null;
  function startRaf(){
    if(rafId) return;
    const tick = ()=>{
      layout();
      rafId = requestAnimationFrame(tick);
    };
    rafId = requestAnimationFrame(tick);
  }
  function stopRaf(){
    if(!rafId) return;
    cancelAnimationFrame(rafId);
    rafId = null;
  }
  video.addEventListener("play", startRaf);
  video.addEventListener("pause", stopRaf);
  video.addEventListener("ended", stopRaf);

  // Keep hotspots stable even when paused/seeked
  video.addEventListener("timeupdate", layout);
  video.addEventListener("pause", layout);
  video.addEventListener("seeked", layout);
  video.addEventListener("loadedmetadata", ()=>{ layout(); tryPlay(); });
video.addEventListener("play", layout);
  window.addEventListener("resize", layout);

})();
</script>

</main>

<footer class="foot">
  <div class="wrap">
    <div class="footRow">
      <div>© <span id="y"></span> ourbang. All rights reserved.</div>
      <div style="display:flex; gap:14px; flex-wrap:wrap">
        <a class="mutelink" href="explore.html">Explore</a>
        <a class="mutelink" href="scan.html">Scan</a>
        <a class="mutelink" href="vision.html">Vision</a>
      </div>
    </div>
  </div>
</footer>
<script>document.getElementById('y').textContent=new Date().getFullYear()</script>



</body>
</html>
